VERSION is: v1.10.0
go clean -cache && go test -v -coverprofile=c.out github.com/dell/csm-operator/pkg/drivers
=== RUN   TestGetCsiDriver
=== RUN   TestGetCsiDriver/pscale_happy_path
=== RUN   TestGetCsiDriver/powerscale_happy_path
=== RUN   TestGetCsiDriver/pflex_happy_path
=== RUN   TestGetCsiDriver/pflex_no-sdc_path
=== RUN   TestGetCsiDriver/pflex_with_no_common_section
=== RUN   TestGetCsiDriver/pstore_happy_path
=== RUN   TestGetCsiDriver/unity_happy_path
=== RUN   TestGetCsiDriver/unity_happy_path_when_secrets_with_certificates_provided
=== RUN   TestGetCsiDriver/unity_common_is_nil
=== RUN   TestGetCsiDriver/file_does_not_exist
2025-07-22T13:28:33.499-0400	ERROR	drivers/commonconfig.go:504	GetCSIDriver failed	{"Error": "open ../../tests/config/driverconfig/fakeDriver/v2.15.0/csidriver.yaml: no such file or directory"}
=== RUN   TestGetCsiDriver/pmax_happy_path
=== RUN   TestGetCsiDriver/pmax_common_env_without_node_section
=== RUN   TestGetCsiDriver/config_file_is_invalid
2025-07-22T13:28:33.501-0400	ERROR	drivers/commonconfig.go:525	GetCSIDriver yaml marshall failed	{"Error": "error unmarshaling JSON: while decoding JSON: json: cannot unmarshal string into Go value of type v1.CSIDriver"}
--- PASS: TestGetCsiDriver (0.01s)
    --- PASS: TestGetCsiDriver/pscale_happy_path (0.00s)
    --- PASS: TestGetCsiDriver/powerscale_happy_path (0.00s)
    --- PASS: TestGetCsiDriver/pflex_happy_path (0.00s)
    --- PASS: TestGetCsiDriver/pflex_no-sdc_path (0.00s)
    --- PASS: TestGetCsiDriver/pflex_with_no_common_section (0.00s)
    --- PASS: TestGetCsiDriver/pstore_happy_path (0.00s)
    --- PASS: TestGetCsiDriver/unity_happy_path (0.00s)
    --- PASS: TestGetCsiDriver/unity_happy_path_when_secrets_with_certificates_provided (0.00s)
    --- PASS: TestGetCsiDriver/unity_common_is_nil (0.00s)
    --- PASS: TestGetCsiDriver/file_does_not_exist (0.00s)
    --- PASS: TestGetCsiDriver/pmax_happy_path (0.00s)
    --- PASS: TestGetCsiDriver/pmax_common_env_without_node_section (0.00s)
    --- PASS: TestGetCsiDriver/config_file_is_invalid (0.00s)
=== RUN   TestGetConfigMap
=== RUN   TestGetConfigMap/pscale_happy_path
=== RUN   TestGetConfigMap/powerscale_happy_path
=== RUN   TestGetConfigMap/pflex_happy_path
=== RUN   TestGetConfigMap/pflex_no-sdc_path
=== RUN   TestGetConfigMap/pflex_with_no_common_section
=== RUN   TestGetConfigMap/pstore_happy_path
=== RUN   TestGetConfigMap/unity_happy_path
=== RUN   TestGetConfigMap/unity_happy_path_when_secrets_with_certificates_provided
=== RUN   TestGetConfigMap/unity_common_is_nil
=== RUN   TestGetConfigMap/file_does_not_exist
2025-07-22T13:28:33.508-0400	ERROR	drivers/commonconfig.go:435	GetConfigMap failed	{"Error": "open ../../tests/config/driverconfig/fakeDriver/v2.15.0/driver-config-params.yaml: no such file or directory"}
=== RUN   TestGetConfigMap/pmax_happy_path
=== RUN   TestGetConfigMap/pmax_common_env_without_node_section
=== RUN   TestGetConfigMap/config_file_is_invalid
2025-07-22T13:28:33.510-0400	ERROR	drivers/commonconfig.go:445	GetConfigMap yaml marshall failed	{"Error": "error unmarshaling JSON: while decoding JSON: json: cannot unmarshal string into Go value of type v1.ConfigMap"}
--- PASS: TestGetConfigMap (0.01s)
    --- PASS: TestGetConfigMap/pscale_happy_path (0.00s)
    --- PASS: TestGetConfigMap/powerscale_happy_path (0.00s)
    --- PASS: TestGetConfigMap/pflex_happy_path (0.00s)
    --- PASS: TestGetConfigMap/pflex_no-sdc_path (0.00s)
    --- PASS: TestGetConfigMap/pflex_with_no_common_section (0.00s)
    --- PASS: TestGetConfigMap/pstore_happy_path (0.00s)
    --- PASS: TestGetConfigMap/unity_happy_path (0.00s)
    --- PASS: TestGetConfigMap/unity_happy_path_when_secrets_with_certificates_provided (0.00s)
    --- PASS: TestGetConfigMap/unity_common_is_nil (0.00s)
    --- PASS: TestGetConfigMap/file_does_not_exist (0.00s)
    --- PASS: TestGetConfigMap/pmax_happy_path (0.00s)
    --- PASS: TestGetConfigMap/pmax_common_env_without_node_section (0.00s)
    --- PASS: TestGetConfigMap/config_file_is_invalid (0.00s)
=== RUN   TestGetUpgradeInfo
=== RUN   TestGetUpgradeInfo/pscale_happy_path
=== RUN   TestGetUpgradeInfo/powerscale_happy_path
=== RUN   TestGetUpgradeInfo/pflex_happy_path
=== RUN   TestGetUpgradeInfo/pflex_no-sdc_path
=== RUN   TestGetUpgradeInfo/pflex_with_no_common_section
=== RUN   TestGetUpgradeInfo/pstore_happy_path
=== RUN   TestGetUpgradeInfo/unity_happy_path
=== RUN   TestGetUpgradeInfo/unity_happy_path_when_secrets_with_certificates_provided
=== RUN   TestGetUpgradeInfo/unity_common_is_nil
=== RUN   TestGetUpgradeInfo/file_does_not_exist
2025-07-22T13:28:33.516-0400	ERROR	drivers/commonconfig.go:409	GetUpgradeInfo failed	{"Error": "open ../../tests/config/driverconfig/fakeDriver/v2.15.0/upgrade-path.yaml: no such file or directory"}
=== RUN   TestGetUpgradeInfo/pmax_happy_path
=== RUN   TestGetUpgradeInfo/pmax_common_env_without_node_section
=== RUN   TestGetUpgradeInfo/config_file_is_invalid
2025-07-22T13:28:33.518-0400	ERROR	drivers/commonconfig.go:417	GetUpgradeInfo yaml marshall failed	{"Error": "error unmarshaling JSON: while decoding JSON: json: cannot unmarshal string into Go value of type operatorutils.UpgradePaths"}
--- PASS: TestGetUpgradeInfo (0.01s)
    --- PASS: TestGetUpgradeInfo/pscale_happy_path (0.00s)
    --- PASS: TestGetUpgradeInfo/powerscale_happy_path (0.00s)
    --- PASS: TestGetUpgradeInfo/pflex_happy_path (0.00s)
    --- PASS: TestGetUpgradeInfo/pflex_no-sdc_path (0.00s)
    --- PASS: TestGetUpgradeInfo/pflex_with_no_common_section (0.00s)
    --- PASS: TestGetUpgradeInfo/pstore_happy_path (0.00s)
    --- PASS: TestGetUpgradeInfo/unity_happy_path (0.00s)
    --- PASS: TestGetUpgradeInfo/unity_happy_path_when_secrets_with_certificates_provided (0.00s)
    --- PASS: TestGetUpgradeInfo/unity_common_is_nil (0.00s)
    --- PASS: TestGetUpgradeInfo/file_does_not_exist (0.00s)
    --- PASS: TestGetUpgradeInfo/pmax_happy_path (0.00s)
    --- PASS: TestGetUpgradeInfo/pmax_common_env_without_node_section (0.00s)
    --- PASS: TestGetUpgradeInfo/config_file_is_invalid (0.00s)
=== RUN   TestGetController
=== RUN   TestGetController/pscale_happy_path
2025-07-22T13:28:33.534-0400	INFO	drivers/commonconfig.go:145	Container to be removed	{"name": "resizer"}
2025-07-22T13:28:33.534-0400	INFO	drivers/commonconfig.go:148	Container to be enabled	{"name": "provisioner"}
2025-07-22T13:28:33.534-0400	INFO	drivers/commonconfig.go:141	Container to be enabled	{"name": "driver"}
=== RUN   TestGetController/powerscale_happy_path
2025-07-22T13:28:33.549-0400	INFO	drivers/commonconfig.go:145	Container to be removed	{"name": "resizer"}
2025-07-22T13:28:33.549-0400	INFO	drivers/commonconfig.go:148	Container to be enabled	{"name": "provisioner"}
2025-07-22T13:28:33.549-0400	INFO	drivers/commonconfig.go:141	Container to be enabled	{"name": "driver"}
=== RUN   TestGetController/pflex_happy_path
=== RUN   TestGetController/pflex_no-sdc_path
=== RUN   TestGetController/pflex_with_no_common_section
=== RUN   TestGetController/pstore_happy_path
=== RUN   TestGetController/unity_happy_path
=== RUN   TestGetController/unity_happy_path_when_secrets_with_certificates_provided
=== RUN   TestGetController/unity_common_is_nil
=== RUN   TestGetController/file_does_not_exist
2025-07-22T13:28:33.610-0400	ERROR	drivers/commonconfig.go:49	GetController failed	{"Error": "open ../../tests/config/driverconfig/fakeDriver/v2.15.0/controller.yaml: no such file or directory"}
=== RUN   TestGetController/pmax_happy_path
=== RUN   TestGetController/pmax_common_env_without_node_section
=== RUN   TestGetController/config_file_is_invalid
2025-07-22T13:28:33.629-0400	ERROR	drivers/commonconfig.go:73	GetController get Deployment failed	{"Error": "error unmarshaling JSON: while decoding JSON: json: cannot unmarshal string into Go value of type v1.TypeMeta"}
--- PASS: TestGetController (0.11s)
    --- PASS: TestGetController/pscale_happy_path (0.02s)
    --- PASS: TestGetController/powerscale_happy_path (0.01s)
    --- PASS: TestGetController/pflex_happy_path (0.01s)
    --- PASS: TestGetController/pflex_no-sdc_path (0.01s)
    --- PASS: TestGetController/pflex_with_no_common_section (0.01s)
    --- PASS: TestGetController/pstore_happy_path (0.01s)
    --- PASS: TestGetController/unity_happy_path (0.01s)
    --- PASS: TestGetController/unity_happy_path_when_secrets_with_certificates_provided (0.01s)
    --- PASS: TestGetController/unity_common_is_nil (0.01s)
    --- PASS: TestGetController/file_does_not_exist (0.00s)
    --- PASS: TestGetController/pmax_happy_path (0.01s)
    --- PASS: TestGetController/pmax_common_env_without_node_section (0.01s)
    --- PASS: TestGetController/config_file_is_invalid (0.00s)
=== RUN   TestGetNode
=== RUN   TestGetNode/pscale_happy_path
2025-07-22T13:28:33.636-0400	INFO	drivers/commonconfig.go:308	Container to be enabled	{"name": "driver"}
=== RUN   TestGetNode/powerscale_happy_path
2025-07-22T13:28:33.640-0400	INFO	drivers/commonconfig.go:308	Container to be enabled	{"name": "driver"}
=== RUN   TestGetNode/pflex_happy_path
2025-07-22T13:28:33.650-0400	INFO	drivers/commonconfig.go:312	Container to be removed	{"name": "sdc-monitor"}
=== RUN   TestGetNode/pflex_no-sdc_path
2025-07-22T13:28:33.658-0400	INFO	drivers/commonconfig.go:312	Container to be removed	{"name": "sdc-monitor"}
=== RUN   TestGetNode/pflex_with_no_common_section
2025-07-22T13:28:33.665-0400	INFO	drivers/commonconfig.go:312	Container to be removed	{"name": "sdc-monitor"}
=== RUN   TestGetNode/pstore_happy_path
=== RUN   TestGetNode/unity_happy_path
=== RUN   TestGetNode/unity_happy_path_when_secrets_with_certificates_provided
=== RUN   TestGetNode/unity_common_is_nil
=== RUN   TestGetNode/file_does_not_exist
2025-07-22T13:28:33.690-0400	ERROR	drivers/commonconfig.go:216	GetNode failed	{"Error": "open ../../tests/config/driverconfig/fakeDriver/v2.15.0/NonExist.yaml: no such file or directory"}
=== RUN   TestGetNode/pmax_happy_path
=== RUN   TestGetNode/pmax_common_env_without_node_section
=== RUN   TestGetNode/config_file_is_invalid
2025-07-22T13:28:33.705-0400	ERROR	drivers/commonconfig.go:239	GetNode Daemonset failed	{"Error": "error unmarshaling JSON: while decoding JSON: json: cannot unmarshal string into Go value of type v1.TypeMeta"}
--- PASS: TestGetNode (0.08s)
    --- PASS: TestGetNode/pscale_happy_path (0.01s)
    --- PASS: TestGetNode/powerscale_happy_path (0.00s)
    --- PASS: TestGetNode/pflex_happy_path (0.01s)
    --- PASS: TestGetNode/pflex_no-sdc_path (0.01s)
    --- PASS: TestGetNode/pflex_with_no_common_section (0.01s)
    --- PASS: TestGetNode/pstore_happy_path (0.01s)
    --- PASS: TestGetNode/unity_happy_path (0.01s)
    --- PASS: TestGetNode/unity_happy_path_when_secrets_with_certificates_provided (0.01s)
    --- PASS: TestGetNode/unity_common_is_nil (0.00s)
    --- PASS: TestGetNode/file_does_not_exist (0.00s)
    --- PASS: TestGetNode/pmax_happy_path (0.01s)
    --- PASS: TestGetNode/pmax_common_env_without_node_section (0.01s)
    --- PASS: TestGetNode/config_file_is_invalid (0.00s)
=== RUN   TestPowerFlexGo
=== RUN   TestPowerFlexGo/missing_secret
=== RUN   TestPowerFlexGo/happy_path
2025-07-22T13:28:33.707-0400	INFO	drivers/powerflex.go:250	For systemID %s configured System Names found %#v ID1[ID1-pflex-system]
=== RUN   TestPowerFlexGo/happy_path_with_initContainers_but_no_MDM
2025-07-22T13:28:33.707-0400	INFO	drivers/powerflex.go:250	For systemID %s configured System Names found %#v ID1[ID1-pflex-system]
=== RUN   TestPowerFlexGo/happy_path_without_sdc
2025-07-22T13:28:33.707-0400	INFO	drivers/powerflex.go:250	For systemID %s configured System Names found %#v ID1[ID1-pflex-system]
=== RUN   TestPowerFlexGo/bad_version
2025-07-22T13:28:33.707-0400	ERROR	drivers/powerflex.go:92	PreCheckPowerFlex failed in version check	{"Error": "stat ../../tests/config/driverconfig/powerflex/v0/upgrade-path.yaml: no such file or directory"}
=== RUN   TestPowerFlexGo/bad_username
=== RUN   TestPowerFlexGo/bad_password
=== RUN   TestPowerFlexGo/bad_system_ID
=== RUN   TestPowerFlexGo/bad_endpoint
=== RUN   TestPowerFlexGo/two_default_systems
2025-07-22T13:28:33.708-0400	INFO	drivers/powerflex.go:250	For systemID %s configured System Names found %#v ID1[ID1-pflex-system]
=== RUN   TestPowerFlexGo/bad_mdm_ip
=== RUN   TestPowerFlexGo/duplicate_system_id
2025-07-22T13:28:33.709-0400	INFO	drivers/powerflex.go:250	For systemID %s configured System Names found %#v ID1[ID1-pflex-system]
2025-07-22T13:28:33.709-0400	INFO	drivers/powerflex.go:250	For systemID %s configured System Names found %#v ID1[ID1-pflex-system]
=== RUN   TestPowerFlexGo/empty_config
=== RUN   TestPowerFlexGo/bad_config
--- PASS: TestPowerFlexGo (0.00s)
    --- PASS: TestPowerFlexGo/missing_secret (0.00s)
    --- PASS: TestPowerFlexGo/happy_path (0.00s)
    --- PASS: TestPowerFlexGo/happy_path_with_initContainers_but_no_MDM (0.00s)
    --- PASS: TestPowerFlexGo/happy_path_without_sdc (0.00s)
    --- PASS: TestPowerFlexGo/bad_version (0.00s)
    --- PASS: TestPowerFlexGo/bad_username (0.00s)
    --- PASS: TestPowerFlexGo/bad_password (0.00s)
    --- PASS: TestPowerFlexGo/bad_system_ID (0.00s)
    --- PASS: TestPowerFlexGo/bad_endpoint (0.00s)
    --- PASS: TestPowerFlexGo/two_default_systems (0.00s)
    --- PASS: TestPowerFlexGo/bad_mdm_ip (0.00s)
    --- PASS: TestPowerFlexGo/duplicate_system_id (0.00s)
    --- PASS: TestPowerFlexGo/empty_config (0.00s)
    --- PASS: TestPowerFlexGo/bad_config (0.00s)
=== RUN   TestModifyPowerflexCR
=== RUN   TestModifyPowerflexCR/Controller_case_with_values
=== RUN   TestModifyPowerflexCR/Node_case_with_values
=== RUN   TestModifyPowerflexCR/CSIDriverSpec_case_with_storage_capacity
=== RUN   TestModifyPowerflexCR/CSIDriverSpec_case_without_storage_capacity
=== RUN   TestModifyPowerflexCR/update_GOSCALEIO_SHOWHTTP_value_for_Controller
=== RUN   TestModifyPowerflexCR/update_GOSCALEIO_SHOWHTTP_value_for_Node
=== RUN   TestModifyPowerflexCR/update_GOSCALEIO_DEBUG_value_for_Controller
=== RUN   TestModifyPowerflexCR/update_GOSCALEIO_DEBUG_value_for_Node
--- PASS: TestModifyPowerflexCR (0.00s)
    --- PASS: TestModifyPowerflexCR/Controller_case_with_values (0.00s)
    --- PASS: TestModifyPowerflexCR/Node_case_with_values (0.00s)
    --- PASS: TestModifyPowerflexCR/CSIDriverSpec_case_with_storage_capacity (0.00s)
    --- PASS: TestModifyPowerflexCR/CSIDriverSpec_case_without_storage_capacity (0.00s)
    --- PASS: TestModifyPowerflexCR/update_GOSCALEIO_SHOWHTTP_value_for_Controller (0.00s)
    --- PASS: TestModifyPowerflexCR/update_GOSCALEIO_SHOWHTTP_value_for_Node (0.00s)
    --- PASS: TestModifyPowerflexCR/update_GOSCALEIO_DEBUG_value_for_Controller (0.00s)
    --- PASS: TestModifyPowerflexCR/update_GOSCALEIO_DEBUG_value_for_Node (0.00s)
=== RUN   TestExtractZonesFromSecret
=== RUN   TestExtractZonesFromSecret/fail_multi_array_but_only_some_zone_test_two
2025-07-22T13:28:33.709-0400	INFO	drivers/powerflex.go:449	Zone is not specified for SystemID: 2b11bb111111bb1b
2025-07-22T13:28:33.709-0400	INFO	drivers/powerflex.go:449	Zone is not specified for SystemID: 1a99aa999999aa9a
2025-07-22T13:28:33.709-0400	INFO	drivers/powerflex.go:451	Zone is specified for SystemID: 1a99aa999999aa9a
2025-07-22T13:28:33.709-0400	INFO	drivers/powerflex.go:449	Zone is not specified for SystemID: 1a99aa999999aa9a
2025-07-22T13:28:33.709-0400	INFO	drivers/powerflex.go:473	found 4 arrays zoning on 1
=== RUN   TestExtractZonesFromSecret/success_no_zone
2025-07-22T13:28:33.710-0400	INFO	drivers/powerflex.go:449	Zone is not specified for SystemID: 2b11bb111111bb1b
2025-07-22T13:28:33.710-0400	INFO	drivers/powerflex.go:473	found 1 arrays zoning on 0
2025-07-22T13:28:33.710-0400	INFO	drivers/powerflex.go:477	Zoning information not found in the array secret. Continue with topology-unaware driver installation mode
=== RUN   TestExtractZonesFromSecret/error_getting_secret
=== RUN   TestExtractZonesFromSecret/error_parsing_empty_secret
=== RUN   TestExtractZonesFromSecret/Fail_Partial_Zone_Config_2
2025-07-22T13:28:33.710-0400	INFO	drivers/powerflex.go:451	Zone is specified for SystemID: 2b11bb111111bb1b
2025-07-22T13:28:33.710-0400	INFO	drivers/powerflex.go:451	Zone is specified for SystemID: 1a99aa999999aa9a
=== RUN   TestExtractZonesFromSecret/Fail_Partial_Zone_Config_3
2025-07-22T13:28:33.710-0400	INFO	drivers/powerflex.go:451	Zone is specified for SystemID: 2b11bb111111bb1b
=== RUN   TestExtractZonesFromSecret/success_with_zone_and_multi_array
2025-07-22T13:28:33.711-0400	INFO	drivers/powerflex.go:451	Zone is specified for SystemID: 2b11bb111111bb1b
2025-07-22T13:28:33.711-0400	INFO	drivers/powerflex.go:451	Zone is specified for SystemID: 1a99aa999999aa9a
2025-07-22T13:28:33.711-0400	INFO	drivers/powerflex.go:473	found 2 arrays zoning on 2
=== RUN   TestExtractZonesFromSecret/fail_multi_array_but_only_some_zone
2025-07-22T13:28:33.711-0400	INFO	drivers/powerflex.go:449	Zone is not specified for SystemID: 2b11bb111111bb1b
2025-07-22T13:28:33.711-0400	INFO	drivers/powerflex.go:451	Zone is specified for SystemID: 1a99aa999999aa9a
2025-07-22T13:28:33.711-0400	INFO	drivers/powerflex.go:473	found 2 arrays zoning on 1
=== RUN   TestExtractZonesFromSecret/error_with_no_system_id
=== RUN   TestExtractZonesFromSecret/error_unmarshaling_config
=== RUN   TestExtractZonesFromSecret/Fail_Partial_Zone_Config_1
2025-07-22T13:28:33.711-0400	INFO	drivers/powerflex.go:451	Zone is specified for SystemID: 2b11bb111111bb1b
2025-07-22T13:28:33.711-0400	INFO	drivers/powerflex.go:451	Zone is specified for SystemID: 1a99aa999999aa9a
=== RUN   TestExtractZonesFromSecret/success_with_zone
2025-07-22T13:28:33.712-0400	INFO	drivers/powerflex.go:451	Zone is specified for SystemID: 2b11bb111111bb1b
2025-07-22T13:28:33.712-0400	INFO	drivers/powerflex.go:473	found 1 arrays zoning on 1
--- PASS: TestExtractZonesFromSecret (0.00s)
    --- PASS: TestExtractZonesFromSecret/fail_multi_array_but_only_some_zone_test_two (0.00s)
    --- PASS: TestExtractZonesFromSecret/success_no_zone (0.00s)
    --- PASS: TestExtractZonesFromSecret/error_getting_secret (0.00s)
    --- PASS: TestExtractZonesFromSecret/error_parsing_empty_secret (0.00s)
    --- PASS: TestExtractZonesFromSecret/Fail_Partial_Zone_Config_2 (0.00s)
    --- PASS: TestExtractZonesFromSecret/Fail_Partial_Zone_Config_3 (0.00s)
    --- PASS: TestExtractZonesFromSecret/success_with_zone_and_multi_array (0.00s)
    --- PASS: TestExtractZonesFromSecret/fail_multi_array_but_only_some_zone (0.00s)
    --- PASS: TestExtractZonesFromSecret/error_with_no_system_id (0.00s)
    --- PASS: TestExtractZonesFromSecret/error_unmarshaling_config (0.00s)
    --- PASS: TestExtractZonesFromSecret/Fail_Partial_Zone_Config_1 (0.00s)
    --- PASS: TestExtractZonesFromSecret/success_with_zone (0.00s)
=== RUN   TestRemoveVolume
=== RUN   TestRemoveVolume/Remove_volume_and_mount
=== RUN   TestRemoveVolume/RemoveVolume_called_with_a_daemonset_that_doesn't_include_the_volume
=== RUN   TestRemoveVolume/RemoveVolume_called_with_nil_daemonset
--- PASS: TestRemoveVolume (0.00s)
    --- PASS: TestRemoveVolume/Remove_volume_and_mount (0.00s)
    --- PASS: TestRemoveVolume/RemoveVolume_called_with_a_daemonset_that_doesn't_include_the_volume (0.00s)
    --- PASS: TestRemoveVolume/RemoveVolume_called_with_nil_daemonset (0.00s)
=== RUN   TestRemoveInitVolume
=== RUN   TestRemoveInitVolume/Remove_init_volume_and_mount
=== RUN   TestRemoveInitVolume/RemoveVolume_called_with_a_daemonset_that_doesn't_include_the_volume
=== RUN   TestRemoveInitVolume/RemoveVolume_called_with_nil_daemonset
--- PASS: TestRemoveInitVolume (0.00s)
    --- PASS: TestRemoveInitVolume/Remove_init_volume_and_mount (0.00s)
    --- PASS: TestRemoveInitVolume/RemoveVolume_called_with_a_daemonset_that_doesn't_include_the_volume (0.00s)
    --- PASS: TestRemoveInitVolume/RemoveVolume_called_with_nil_daemonset (0.00s)
=== RUN   TestPrecheckPowerMax
=== RUN   TestPrecheckPowerMax/happy_path
2025-07-22T13:28:33.712-0400	INFO	drivers/powermax.go:126	[PrecheckPowerMax] Using ConfigMap: csm-creds
=== RUN   TestPrecheckPowerMax/success:_use_reverse_proxy_secret
2025-07-22T13:28:33.712-0400	INFO	drivers/powermax.go:124	[PrecheckPowerMax] Using Secret: csm-creds
=== RUN   TestPrecheckPowerMax/invalid_reverse_proxy_secret,_use_default
2025/07/22 13:28:33 Error parsing X_CSI_REVPROXY_USE_SECRET, strconv.ParseBool: parsing "invalid": invalid syntax. Using configMap solution
2025-07-22T13:28:33.712-0400	INFO	drivers/powermax.go:126	[PrecheckPowerMax] Using ConfigMap: csm-creds
=== RUN   TestPrecheckPowerMax/no_proxy_set_defaults
2025-07-22T13:28:33.712-0400	INFO	drivers/powermax.go:126	[PrecheckPowerMax] Using ConfigMap: csm-creds
=== RUN   TestPrecheckPowerMax/missing_secret
2025-07-22T13:28:33.712-0400	INFO	drivers/powermax.go:126	[PrecheckPowerMax] Using ConfigMap: csm-creds
2025-07-22T13:28:33.712-0400	ERROR	drivers/powermax.go:132	Secret "csm-creds" not foundFailed query for secretcsm-creds
err: failed to find secret csm-creds
=== RUN   TestPrecheckPowerMax/bad_version
2025-07-22T13:28:33.712-0400	ERROR	drivers/powermax.go:113	PreCheckPowerMax failed in version check	{"Error": "stat ../../tests/config/driverconfig/powermax/v0/upgrade-path.yaml: no such file or directory"}
err: powermax v0 not supported
=== RUN   TestPrecheckPowerMax/bad_latest_version
2025-07-22T13:28:33.712-0400	INFO	drivers/powermax.go:126	[PrecheckPowerMax] Using ConfigMap: csm-creds
--- PASS: TestPrecheckPowerMax (0.00s)
    --- PASS: TestPrecheckPowerMax/happy_path (0.00s)
    --- PASS: TestPrecheckPowerMax/success:_use_reverse_proxy_secret (0.00s)
    --- PASS: TestPrecheckPowerMax/invalid_reverse_proxy_secret,_use_default (0.00s)
    --- PASS: TestPrecheckPowerMax/no_proxy_set_defaults (0.00s)
    --- PASS: TestPrecheckPowerMax/missing_secret (0.00s)
    --- PASS: TestPrecheckPowerMax/bad_version (0.00s)
    --- PASS: TestPrecheckPowerMax/bad_latest_version (0.00s)
=== RUN   TestDynamicallyMountPowermaxContent
=== RUN   TestDynamicallyMountPowermaxContent/success:_dynamically_mount_secret_for_deployment
=== RUN   TestDynamicallyMountPowermaxContent/success:_dynamically_mount_config_content_for_deployment
=== RUN   TestDynamicallyMountPowermaxContent/success:_dynamically_mount_secret_for_daemonset
=== RUN   TestDynamicallyMountPowermaxContent/success:_empty_envs
=== RUN   TestDynamicallyMountPowermaxContent/error:_invalid_type_passed_through
--- PASS: TestDynamicallyMountPowermaxContent (0.00s)
    --- PASS: TestDynamicallyMountPowermaxContent/success:_dynamically_mount_secret_for_deployment (0.00s)
    --- PASS: TestDynamicallyMountPowermaxContent/success:_dynamically_mount_config_content_for_deployment (0.00s)
    --- PASS: TestDynamicallyMountPowermaxContent/success:_dynamically_mount_secret_for_daemonset (0.00s)
    --- PASS: TestDynamicallyMountPowermaxContent/success:_empty_envs (0.00s)
    --- PASS: TestDynamicallyMountPowermaxContent/error:_invalid_type_passed_through (0.00s)
=== RUN   TestGetApplyCertVolume
=== RUN   TestGetApplyCertVolume/happy_path
=== RUN   TestGetApplyCertVolume/invalid_value_for_skip_cert_validation
=== RUN   TestGetApplyCertVolume/invalid_value_for_cert_secret_cnt
--- PASS: TestGetApplyCertVolume (0.00s)
    --- PASS: TestGetApplyCertVolume/happy_path (0.00s)
    --- PASS: TestGetApplyCertVolume/invalid_value_for_skip_cert_validation (0.00s)
    --- PASS: TestGetApplyCertVolume/invalid_value_for_cert_secret_cnt (0.00s)
=== RUN   TestPrecheckPowerScale
=== RUN   TestPrecheckPowerScale/missing_secret
2025-07-22T13:28:33.712-0400	ERROR	drivers/powerscale.go:103	Secret "csm-creds" not foundFailed query for secret csm-creds
=== RUN   TestPrecheckPowerScale/bad_version
2025-07-22T13:28:33.712-0400	ERROR	drivers/powerscale.go:63	PreCheckPowerScale failed in version check	{"Error": "stat ../../tests/config/driverconfig/powerscale/v0/upgrade-path.yaml: no such file or directory"}
=== RUN   TestPrecheckPowerScale/missing_envs
2025-07-22T13:28:33.712-0400	ERROR	drivers/powerscale.go:103	Secret "csm-creds" not foundFailed query for secret csm-creds
=== RUN   TestPrecheckPowerScale/happy_path
=== RUN   TestPrecheckPowerScale/invalid_value_for_skip_cert_validation
err: NotABool is an invalid value for X_CSI_ISI_SKIP_CERTIFICATE_VALIDATION: strconv.ParseBool: parsing "NotABool": invalid syntax
=== RUN   TestPrecheckPowerScale/invalid_value_for_cert_secret_cnt
err: thisIsNotANumber is an invalid value for CERT_SECRET_COUNT: strconv.ParseInt: parsing "thisIsNotANumber": invalid syntax
--- PASS: TestPrecheckPowerScale (0.00s)
    --- PASS: TestPrecheckPowerScale/missing_secret (0.00s)
    --- PASS: TestPrecheckPowerScale/bad_version (0.00s)
    --- PASS: TestPrecheckPowerScale/missing_envs (0.00s)
    --- PASS: TestPrecheckPowerScale/happy_path (0.00s)
    --- PASS: TestPrecheckPowerScale/invalid_value_for_skip_cert_validation (0.00s)
    --- PASS: TestPrecheckPowerScale/invalid_value_for_cert_secret_cnt (0.00s)
=== RUN   TestModifyPowerScaleCR
=== RUN   TestModifyPowerScaleCR/update_GOISILON_DEBUG_value_for_Controller
=== RUN   TestModifyPowerScaleCR/update_GOISILON_DEBUG_value_for_Node
--- PASS: TestModifyPowerScaleCR (0.00s)
    --- PASS: TestModifyPowerScaleCR/update_GOISILON_DEBUG_value_for_Controller (0.00s)
    --- PASS: TestModifyPowerScaleCR/update_GOISILON_DEBUG_value_for_Node (0.00s)
=== RUN   TestPrecheckPowerStore
=== RUN   TestPrecheckPowerStore/missing_secret
2025-07-22T13:28:33.713-0400	ERROR	drivers/powerstore.go:132	Secret "csm-config" not found Failed query for secret csm-configNamespacedriver-test
=== RUN   TestPrecheckPowerStore/bad_version
2025-07-22T13:28:33.713-0400	ERROR	drivers/powerstore.go:91	PreCheckPowerStore failed in version check	{"Error": "stat ../../tests/config/driverconfig/powerstore/v0/upgrade-path.yaml: no such file or directory"}
=== RUN   TestPrecheckPowerStore/missing_envs
2025-07-22T13:28:33.713-0400	ERROR	drivers/powerstore.go:132	Secret "csm-creds" not found Failed query for secret csm-credsNamespacedriver-test
=== RUN   TestPrecheckPowerStore/invalid_skip_cert_validation
=== RUN   TestPrecheckPowerStore/invalid_cert_secret_count
=== RUN   TestPrecheckPowerStore/valid_skip_cert_validation
2025-07-22T13:28:33.713-0400	ERROR	drivers/powerstore.go:132	Secret "csm-creds" not found Failed query for secret csm-credsNamespacedriver-test
=== RUN   TestPrecheckPowerStore/happy_path
=== RUN   TestPrecheckPowerStore/bad_version#01
2025-07-22T13:28:33.713-0400	ERROR	drivers/powerstore.go:91	PreCheckPowerStore failed in version check	{"Error": "stat ../../tests/config/driverconfig/powerstore/v0/upgrade-path.yaml: no such file or directory"}
--- PASS: TestPrecheckPowerStore (0.00s)
    --- PASS: TestPrecheckPowerStore/missing_secret (0.00s)
    --- PASS: TestPrecheckPowerStore/bad_version (0.00s)
    --- PASS: TestPrecheckPowerStore/missing_envs (0.00s)
    --- PASS: TestPrecheckPowerStore/invalid_skip_cert_validation (0.00s)
    --- PASS: TestPrecheckPowerStore/invalid_cert_secret_count (0.00s)
    --- PASS: TestPrecheckPowerStore/valid_skip_cert_validation (0.00s)
    --- PASS: TestPrecheckPowerStore/happy_path (0.00s)
    --- PASS: TestPrecheckPowerStore/bad_version#01 (0.00s)
=== RUN   TestModifyPowerstoreCR
=== RUN   TestModifyPowerstoreCR/update_GOPOWERSTORE_DEBUG_value_for_Controller
=== RUN   TestModifyPowerstoreCR/update_GOPOWERSTORE_DEBUG_value_for_Node
=== RUN   TestModifyPowerstoreCR/update_Shared_NFS_values_for_Node
=== RUN   TestModifyPowerstoreCR/update_Shared_NFS_values_for_Controller
=== RUN   TestModifyPowerstoreCR/minimal_minifest_-_update_Shared_NFS_values_for_Node
--- PASS: TestModifyPowerstoreCR (0.00s)
    --- PASS: TestModifyPowerstoreCR/update_GOPOWERSTORE_DEBUG_value_for_Controller (0.00s)
    --- PASS: TestModifyPowerstoreCR/update_GOPOWERSTORE_DEBUG_value_for_Node (0.00s)
    --- PASS: TestModifyPowerstoreCR/update_Shared_NFS_values_for_Node (0.00s)
    --- PASS: TestModifyPowerstoreCR/update_Shared_NFS_values_for_Controller (0.00s)
    --- PASS: TestModifyPowerstoreCR/minimal_minifest_-_update_Shared_NFS_values_for_Node (0.00s)
=== RUN   TestGetApplyCertVolumePowerStore
=== RUN   TestGetApplyCertVolumePowerStore/invalid_value_for_skip_cert_validation
    powerstore_test.go:436: Expected error: "is an invalid value for X_CSI_POWERSTORE_SKIP_CERTIFICATE_VALIDATION", Actual error: NotABool is an invalid value for X_CSI_POWERSTORE_SKIP_CERTIFICATE_VALIDATION: strconv.ParseBool: parsing "NotABool": invalid syntax
=== RUN   TestGetApplyCertVolumePowerStore/invalid_value_for_cert_secret_cnt
    powerstore_test.go:436: Expected error: "is an invalid value for CERT_SECRET_COUNT", Actual error: thisIsNotANumber is an invalid value for CERT_SECRET_COUNT: strconv.ParseInt: parsing "thisIsNotANumber": invalid syntax
=== RUN   TestGetApplyCertVolumePowerStore/skip_cert_false
    powerstore_test.go:436: Expected error: "", Actual error: <nil>
=== RUN   TestGetApplyCertVolumePowerStore/common_is_nil
    powerstore_test.go:436: Expected error: "", Actual error: <nil>
=== RUN   TestGetApplyCertVolumePowerStore/common_env_is_empty
    powerstore_test.go:436: Expected error: "", Actual error: <nil>
--- PASS: TestGetApplyCertVolumePowerStore (0.00s)
    --- PASS: TestGetApplyCertVolumePowerStore/invalid_value_for_skip_cert_validation (0.00s)
    --- PASS: TestGetApplyCertVolumePowerStore/invalid_value_for_cert_secret_cnt (0.00s)
    --- PASS: TestGetApplyCertVolumePowerStore/skip_cert_false (0.00s)
    --- PASS: TestGetApplyCertVolumePowerStore/common_is_nil (0.00s)
    --- PASS: TestGetApplyCertVolumePowerStore/common_env_is_empty (0.00s)
=== RUN   TestPrecheckUnity
=== RUN   TestPrecheckUnity/missing_secret
2025-07-22T13:28:33.713-0400	ERROR	drivers/unity.go:113	Secret "csm-creds" not found Failed query for secret csm-credsNamespacedriver-test
=== RUN   TestPrecheckUnity/should_check_for_certs_in_driver_namespace_when_X_CSI_UNITY_SKIP_CERTIFICATE_VALIDATION_is_false_
2025-07-22T13:28:33.713-0400	ERROR	drivers/unity.go:113	Secret "csm-creds" not found Failed query for secret csm-credsNamespacedriver-test
=== RUN   TestPrecheckUnity/happy_path
=== RUN   TestPrecheckUnity/bad_version
2025-07-22T13:28:33.714-0400	ERROR	drivers/unity.go:76	PreCheckUnity failed in version check	{"Error": "stat ../../tests/config/driverconfig/unity/v0/upgrade-path.yaml: no such file or directory", "Namespace": "driver-test"}
=== RUN   TestPrecheckUnity/invalid_value_for_skip_cert_validation
=== RUN   TestPrecheckUnity/invalid_value_for_cert_secret_cnt
--- PASS: TestPrecheckUnity (0.00s)
    --- PASS: TestPrecheckUnity/missing_secret (0.00s)
    --- PASS: TestPrecheckUnity/should_check_for_certs_in_driver_namespace_when_X_CSI_UNITY_SKIP_CERTIFICATE_VALIDATION_is_false_ (0.00s)
    --- PASS: TestPrecheckUnity/happy_path (0.00s)
    --- PASS: TestPrecheckUnity/bad_version (0.00s)
    --- PASS: TestPrecheckUnity/invalid_value_for_skip_cert_validation (0.00s)
    --- PASS: TestPrecheckUnity/invalid_value_for_cert_secret_cnt (0.00s)
=== RUN   TestModifyUnityCR
=== RUN   TestModifyUnityCR/update_GOUNITY_DEBUG_value_for_Controller
=== RUN   TestModifyUnityCR/update_GOUNITY_DEBUG_value_for_Node
=== RUN   TestModifyUnityCR/update_GOUNITY_SHOWHTTP_value_for_Controller
=== RUN   TestModifyUnityCR/update_GOUNITY_SHOWHTTP_value_for_Node
--- PASS: TestModifyUnityCR (0.00s)
    --- PASS: TestModifyUnityCR/update_GOUNITY_DEBUG_value_for_Controller (0.00s)
    --- PASS: TestModifyUnityCR/update_GOUNITY_DEBUG_value_for_Node (0.00s)
    --- PASS: TestModifyUnityCR/update_GOUNITY_SHOWHTTP_value_for_Controller (0.00s)
    --- PASS: TestModifyUnityCR/update_GOUNITY_SHOWHTTP_value_for_Node (0.00s)
PASS
coverage: 97.1% of statements
ok  	github.com/dell/csm-operator/pkg/drivers	0.277s	coverage: 97.1% of statements
