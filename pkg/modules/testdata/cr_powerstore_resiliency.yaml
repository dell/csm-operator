apiVersion: storage.dell.com/v1
kind: ContainerStorageModule
metadata:
  name: test-powerstore
  namespace: test-powerstore
spec:
  driver:
    csiDriverType: "powerstore"
    configVersion: v2.7.0
    authSecret: test-powerstore-creds 
    replicas: 1
    common:
      image: "dellemc/csi-powerstore:v2.6.0"
      imagePullPolicy: IfNotPresent

  modules:
    - name: resiliency
      configVersion: "v1.6.0"
      enabled: true
      components:
      - name: podmon-controller
        image: dellemc/podmon:v1.6.0
        envs:
          - name: "X_CSI_PODMON_API_PORT"
            value: "8083"
          - name: "X_CSI_PODMON_ARRAY_CONNECTIVITY_POLL_RATE"
            value: "60"
        args: ["arrayConnectivityPollRate=60"]
      - name: podmon-node
        image: dellemc/podmon:v1.6.0
        envs:
          - name: "X_CSI_PODMON_API_PORT"
            value: "8083"
          - name: "X_CSI_PODMON_ARRAY_CONNECTIVITY_POLL_RATE"
            value: "60"